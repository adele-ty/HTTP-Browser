# 回流
回流指的是浏览器在渲染网页时，需要重新计算并更新元素的几何属性（元素在视口内的位置和尺寸大小），并重新构建文档流的过程。当页面中的元素发生变化，例如添加/删除元素、改变元素的尺寸或位置、修改元素的样式等操作，都会导致浏览器进行回流操作。回流操作是比较耗费性能的，因为它会导致浏览器重新计算和布局页面，导致页面重新绘制，影响网页的性能。  
回流的触发条件：  
* 添加/删除元素  
* 修改元素的几何属性，如宽度、高度、位置、边距、填充等  
* 修改页面的布局，如改变元素的显示模式、修改文档流等  
* 改变窗口大小、滚动页面等  
# 重绘
重绘指的是浏览器在渲染网页时，需要重新绘制元素的样式，但不需要重新计算元素的几何属性和文档流的过程。当页面中的元素的样式发生变化，例如修改元素的颜色、背景、边框等属性，都会导致浏览器进行重绘操作。重绘操作相对于回流操作来说，性能开销要小一些，但仍然会影响网页的性能。  
重绘的触发条件：  
* 修改元素的颜色、背景、边框、文本等样式属性  
* 修改元素的可见性、透明度等属性  
* 修改元素的文本内容  
# 如何减少回流和重绘 
* 使用 absolute 或 fixed定位使元素脱离文档流，这在制作复杂的动画时对性能的影响比较明显。  
* 开启 GPU 加速，利用 css 属性 transform 、will-change 等，比如改变元素位置，我们使用 translate 会比使用绝对定位改变其 left 、top 等来的高效，因为它不会触发回流或重绘，transform 使浏览器为元素创建⼀个 GPU 图层，这使得动画元素在一个独立的层中进行渲染。当元素的内容没有发生改变，就没有必要进行重绘。  
* 避免频繁更改元素的样式和布局属性，尽可能减少DOM操作的次数。  
* 使用CSS Sprites（雪碧图）来减少HTTP请求，提高网页的加载速度。  
* 使用图片延迟加载（Lazy Load Image）来减少页面的加载时间。  
* 使用浏览器缓存来减少HTTP请求，提高网页的加载速度。  
* 使用CDN加速来提高网页的加载速度。  

另外，浏览器针对页面的回流与重绘，进行了自身的优化——渲染队列  
**浏览器会将所有的回流、重绘操作放在一个队列中，当队列中的操作到了一定的数量或者时间间隔，浏览器就会对队列进行批处理。这样就让多次的回流重绘变成一次回流重绘。**  

参考[回流与重绘](https://juejin.cn/post/6844903779700047885)  
参考[关键渲染路径](https://github.com/creeperyang/blog/issues/61)  
参考[回流与重绘](https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/24)